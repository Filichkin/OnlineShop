# Инструкции по тестированию корзины

## Шаг 1: Откройте браузер с консолью разработчика

1. Откройте браузер (Chrome/Firefox/Edge)
2. Нажмите `F12` или `Cmd+Option+I` (Mac) для открытия DevTools
3. Перейдите на вкладку **Console**

## Шаг 2: Откройте страницу с товарами

1. Перейдите на главную страницу: `http://localhost:5173`
2. Выберите любую категорию (например, "Моторные масла")
3. Вы должны увидеть список товаров

## Шаг 3: Добавьте товар в корзину

1. Нажмите кнопку "Добавить" на любом товаре
2. Должно появиться уведомление "Добавлено"
3. **Проверьте консоль** - вы должны увидеть логи от AddToCartButton

## Шаг 4: Перейдите в корзину

1. Перейдите на страницу корзины: `http://localhost:5173/cart`
2. **Внимательно изучите логи в консоли!**

## Что искать в консоли:

### 1. При монтировании компонента корзины:
```
========== CART COMPONENT MOUNTED ==========
Current URL: http://localhost:5173/cart
Document cookies: session_id=...
Session cookie found? true/false
```

**ВАЖНО:** Если `Session cookie found? false` - это проблема! Значит cookie не создается или не сохраняется.

### 2. При вызове API:
```
========== CART API: getCart() CALLED ==========
API URL: http://localhost:8000/cart/
Response status: 200
Response ok: true
```

### 3. Данные из API:
```
========== RAW JSON RESPONSE ==========
Full data: {
  "id": ...,
  "items": [...],
  "total_items": ...
}
Items is array? true
Items length: <количество>
```

**ВАЖНО:** Проверьте значение `Items length:` - если оно 0, значит корзина пуста на бэкенде.

### 4. Решение рендеринга:
```
========== RENDER DECISION ==========
cartData?.items.length: <число>
isEmpty: true/false
Will render: EMPTY CART / CART ITEMS
```

## Возможные проблемы и решения:

### Проблема 1: `Session cookie found? false`

**Причина:** Cookie не создается при добавлении товара.

**Решение:**
1. Откройте DevTools → Application → Cookies
2. Проверьте есть ли cookie с именем `session_id`
3. Если нет - проверьте Network tab при добавлении товара
4. Убедитесь что в ответе от `/cart/items` есть заголовок `Set-Cookie`

### Проблема 2: `Items length: 0` (корзина пуста)

**Причина:** Cookie есть, но для этой сессии нет товаров в БД.

**Решение:**
1. Добавьте товар снова
2. Сразу же обновите страницу корзины (F5)
3. Проверьте логи - количество должно увеличиться

### Проблема 3: `Will render: EMPTY CART` хотя `Items length: > 0`

**Причина:** Баг в логике рендеринга.

**Решение:** Это баг в коде, нужно исправить условие рендеринга.

### Проблема 4: Network Error

**Причина:** Бэкенд не запущен или недоступен.

**Решение:**
1. Убедитесь что бэкенд запущен на `http://localhost:8000`
2. Проверьте в отдельной вкладке: `http://localhost:8000/docs`

## Отправьте мне эту информацию:

После выполнения всех шагов, скопируйте и отправьте:

1. **Все логи из консоли** (особенно секции с ====)
2. **Screenshot вкладки Application → Cookies** (покажите session_id cookie)
3. **Screenshot вкладки Network** (запрос к `/cart/` и его ответ)
4. **Что показывает страница** - пустая корзина или товары?

Это поможет точно определить где проблема!
